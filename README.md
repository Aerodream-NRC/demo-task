#**Тестовое задание по работе с документами**

##**Описание :**

###Проект состоит из двух частей:

 - Сервис **demo-task** (порт 8080) *основное приложение, предоставляющее REST API для управления документами (создание, изменение статуса, просмотр).*
 - Сервис **document-generator** (порт 8081) *вспомогательный инструмент для массовой генерации документов путём асинхронной отправки запросов в сервис.*

##Технологии :

 - **Java 21**
 - **Spring Boot 4 / Spring WebFlux**
 - **Gradle**
 - **PostgreSQL**
 - **Docker**

##**Запуск проекта :**

###Запуск в Docker
 - Соберите JAR-файл:
Выберите дерикторию проекта и затем выполните команду :

*/gradlew clean build -x test*

запустите Docker-compose файл:

*/docker-compose up -d --build*

###Локальный запуск *(без Docker)*
После запуска в докере выполните эту команду :
*/docker stop demo-task document-generator*
Перейдите в корневую папку проекта demo-task.
Выполните команду:
*/gradlew bootRun*
Сервис будет доступен по адресу: *http://localhost:8080*
Затем перейдите в папку 
document-generator и выполните команду
/gradlew bootRun

API :

document-generator :

Сгенерировать документы :

**POST** *http://localhost:8081/api/generate*

Тело запроса :
{
  "count": "количество документов которое необходимо сгенерировать",
  "authorPrefix": "префикс создателя документа *опционально*",
  "namePrefix": "префикс названия документа *опционально*"
}

demo-task :

Создать один документ :

**POST** *http://localhost:8080/api/documents/create*

Тело запроса :
{
  "author": "имя автора документа",
  "name": "название документа"
}

Ответ :
{
  "uuid": "сгенерированный UUID индивидуальный для каждого документа",
  "author": "автор документа",
  "name": "название документа",
  "status": "статус документа",
  "createdAt": "дата создания документа",
  "updatedAt": "дата последнего изменения документа *может быть пустым*",
  "history": ["массив хранящий историю изменений документа *может быть пустым*"\]
}

Получить один документ вместе с историей изменения по ID :

**GET** *http://localhost:8080/api/documents/*[ЗДЕСЬ НУЖНО ВВЕСТИ ID]**

Ответ :
{
  "uuid": "сгенерированный UUID индивидуальный для каждого документа",
  "author": "автор документа",
  "name": "название документа",
  "status": "статус документа",
  "createdAt": "дата создания документа",
  "updatedAt": "дата последнего изменения документа *может быть пустым*",
  "history": ["массив хранящий историю изменений документа *может быть пустым*"\]
}

Получить несколько документов с пагинацией :

**GET** *http://localhost:8080/api/documents*

**Параметр :** listId - перечень ID которые необходимо получить *опционально*, без указания в ответе будет 10 последних созданных документов

Ответ :
{
  "content": [
    {
      "uuid": "сгенерированный UUID индивидуальный для каждого документа",
      "author": "автор документа",
      "name": "название документа",
      "status": "статус документа",
      "createdAt": "дата создания документа",
      "updatedAt": "дата последнего изменения документа *может быть пустым*",
    },
    {
      "uuid": "сгенерированный UUID индивидуальный для каждого документа",
      "author": "автор документа",
      "name": "название документа",
      "status": "статус документа",
      "createdAt": "дата создания документа",
      "updatedAt": "дата последнего изменения документа *может быть пустым*",
    }
  \],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 20,
    "sort": {
      "sorted": true,
      "unsorted": false,
      "empty": false
    },
    "offset": 0,
    "paged": true,
    "unpaged": false
  },
  "totalPages": 5,
  "totalElements": 97,
  "last": false,
  "first": true,
  "size": 20,
  "number": 0,
  "sort": {
    "sorted": true,
    "unsorted": false,
    "empty": false
  },
  "numberOfElements": 20,
  "empty": false
}
